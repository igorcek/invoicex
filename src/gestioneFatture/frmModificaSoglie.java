/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

/*
 * frmModificaSoglie.java
 *
 * Created on 8-apr-2010, 15.32.51
 */

package gestioneFatture;

import it.tnx.Db;
import java.sql.Types;
import java.util.Vector;
import javax.swing.JDialog;

/**
 *
 * @author Toce Alessio
 */
public class frmModificaSoglie extends javax.swing.JDialog {

    JDialogImpostazioni parent;

    /** Creates new form frmModificaSoglie */
    public frmModificaSoglie(JDialog parent, boolean modal) {
        super(parent, modal);

        this.parent = (JDialogImpostazioni)parent;
        initComponents();

         this.dati.dbNomeTabella = "soglie_provvigioni";

        Vector chiave = new Vector();
        chiave.add("soglia");
        this.dati.dbChiave = chiave;
        this.dati.butSave = this.butSave;
        this.dati.butUndo = this.butUndo;
        this.dati.dbOpen(Db.getConn(), "select * from soglie_provvigioni where soglia = " + Db.pc(String.valueOf(comSoglie.getSelectedItem()), Types.INTEGER));
        this.dati.dbRefresh();
    }

    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        dati = new tnxbeans.tnxDbPanel();
        comSoglie = new javax.swing.JComboBox();
        jLabel1 = new javax.swing.JLabel();
        jPanel1 = new javax.swing.JPanel();
        butSave = new javax.swing.JButton();
        butUndo = new javax.swing.JButton();
        jLabel3 = new javax.swing.JLabel();
        jLabel4 = new javax.swing.JLabel();
        tnxTextField2 = new tnxbeans.tnxTextField();
        tnxTextField3 = new tnxbeans.tnxTextField();

        setTitle("Modifica Soglie");
        addWindowListener(new java.awt.event.WindowAdapter() {
            public void windowClosing(java.awt.event.WindowEvent evt) {
                formWindowClosing(evt);
            }
        });
        getContentPane().setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        dati.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        comSoglie.setModel(new javax.swing.DefaultComboBoxModel(new String[] { "1", "2", "3", "4", "5" }));
        comSoglie.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                comSoglieActionPerformed(evt);
            }
        });
        dati.add(comSoglie, new org.netbeans.lib.awtextra.AbsoluteConstraints(61, 11, 88, -1));

        jLabel1.setText("Soglia:");
        dati.add(jLabel1, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 14, 47, -1));

        butSave.setIcon(new javax.swing.ImageIcon(getClass().getResource("/res/icons/tango-icon-theme-080/16x16/devices/media-floppy.png"))); // NOI18N
        butSave.setText("Salva");
        butSave.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                butSaveActionPerformed(evt);
            }
        });
        jPanel1.add(butSave);

        butUndo.setIcon(new javax.swing.ImageIcon(getClass().getResource("/res/icons/tango-icon-theme-080/16x16/actions/edit-undo.png"))); // NOI18N
        butUndo.setText("Annulla");
        butUndo.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                butUndoActionPerformed(evt);
            }
        });
        jPanel1.add(butUndo);

        dati.add(jPanel1, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 115, 256, -1));

        jLabel3.setText("Percentuale Sconto:");
        dati.add(jLabel3, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 45, 140, -1));

        jLabel4.setText("Percentuale Provvigione:");
        dati.add(jLabel4, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 80, 140, -1));

        tnxTextField2.setText("tnxTextField2");
        tnxTextField2.setDbNomeCampo("sconto_soglia");
        dati.add(tnxTextField2, new org.netbeans.lib.awtextra.AbsoluteConstraints(160, 40, 80, -1));

        tnxTextField3.setText("tnxTextField3");
        tnxTextField3.setDbNomeCampo("percentuale");
        dati.add(tnxTextField3, new org.netbeans.lib.awtextra.AbsoluteConstraints(160, 80, 80, -1));

        getContentPane().add(dati, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 0, -1, -1));

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void butSaveActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_butSaveActionPerformed
        this.dati.dbSave();
}//GEN-LAST:event_butSaveActionPerformed

    private void butUndoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_butUndoActionPerformed
        dati.dbUndo();
}//GEN-LAST:event_butUndoActionPerformed

    private void comSoglieActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_comSoglieActionPerformed
        this.dati.dbOpen(Db.getConn(), "select * from soglie_provvigioni where soglia = " + Db.pc(String.valueOf(comSoglie.getSelectedItem()), Types.INTEGER));
    }//GEN-LAST:event_comSoglieActionPerformed

    private void formWindowClosing(java.awt.event.WindowEvent evt) {//GEN-FIRST:event_formWindowClosing
        parent.griglia_soglie.dbRefresh();
    }//GEN-LAST:event_formWindowClosing

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton butSave;
    private javax.swing.JButton butUndo;
    private javax.swing.JComboBox comSoglie;
    private tnxbeans.tnxDbPanel dati;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JPanel jPanel1;
    private tnxbeans.tnxTextField tnxTextField2;
    private tnxbeans.tnxTextField tnxTextField3;
    // End of variables declaration//GEN-END:variables

}
